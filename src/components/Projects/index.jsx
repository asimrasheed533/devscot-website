import { useEffect, useRef, useState } from "react";

import Project from "./components/project";
import gsap from "gsap";
import { motion } from "framer-motion";
import styles from "./style.module.scss";

export default function Home() {
  const [modal, setModal] = useState({ active: false, index: 0 });
  const { active, index } = modal;
  const modalContainer = useRef(null);
  const cursor = useRef(null);
  const cursorLabel = useRef(null);

  let xMoveContainer = useRef(null);
  let yMoveContainer = useRef(null);
  let xMoveCursor = useRef(null);
  let yMoveCursor = useRef(null);
  let xMoveCursorLabel = useRef(null);
  let yMoveCursorLabel = useRef(null);

  const projects = [
    {
      src: "prj01.png",
      svg: (
        <svg
          width="46"
          height="46"
          viewBox="0 0 46 46"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M11.4631 41.7593C11.39 42.5622 11.3506 43.2528 11.2634 43.9406C11.1004 45.2405 10.3834 45.9704 9.03387 45.9788C6.73963 45.9788 4.4454 46.0265 2.15116 45.9788C0.71726 45.9507 0.0199934 45.1983 0.00874709 43.7722C-0.0109339 41.5263 0.00874709 39.2804 0.00874709 37.0345C0.00874709 35.4511 0.708821 34.7886 2.33109 34.71C4.22609 34.6286 4.22609 34.6286 4.23172 32.7448C4.24296 26.1943 4.25328 19.6485 4.26265 13.1073V11.5183C4.07407 11.4385 3.87947 11.3737 3.68065 11.3246C0.0677891 10.954 0.0256179 10.9203 0.0452988 7.22865C0.0452988 5.63967 0.0452988 4.0507 0.0452988 2.45612C0.0706029 0.771692 0.762246 0.0473869 2.42388 0.0221206C4.53256 -0.00595315 6.64123 -0.00876052 8.74709 0.0221206C10.4087 0.0473869 11.0638 0.738003 11.1566 2.44208C11.2606 4.3567 11.2606 4.36793 13.1894 4.37074C19.7497 4.37074 26.31 4.37074 32.8703 4.37074C34.7316 4.37074 34.7372 4.34828 34.8384 2.51226C34.9396 0.676241 35.5863 0.0333516 37.4616 0.0193147C39.4297 0.00247051 41.3978 0.00247051 43.3659 0.0193147C45.2693 0.0193147 45.9666 0.735197 45.9863 2.66667C46.006 4.59814 46.0031 6.59699 45.9863 8.56215C45.9694 10.4066 45.3284 11.1337 43.4559 11.1309C42.1485 11.1309 41.6818 11.5043 41.6986 12.8911C41.7689 19.6288 41.7549 26.3665 41.6986 33.0901C41.6986 34.3422 42.0276 34.8476 43.3518 34.8139C45.3199 34.7662 45.9638 35.482 45.9779 37.4079C45.9919 39.3337 45.9947 41.3382 45.9779 43.3034C45.961 45.1534 45.2721 45.8609 43.4474 45.8805C41.4344 45.9058 39.4213 45.9086 37.4082 45.9002C35.4963 45.9002 34.8103 45.3191 34.8272 43.4213C34.8272 42.0176 34.4223 41.5909 32.9772 41.6105C26.3306 41.7004 19.6785 41.6639 13.015 41.6807C12.5146 41.6919 12.0254 41.734 11.4631 41.7593ZM11.4631 38.9323C12.0254 38.9632 12.4302 39.0053 12.8435 39.0081C19.6391 39.0081 26.4318 39.0081 33.2246 39.067C34.4814 39.067 34.8328 38.6459 34.8469 37.4612C34.8778 35.3557 35.4457 34.7998 37.5628 34.8279C38.8027 34.8448 39.1739 34.3956 39.1654 33.1856C39.1223 26.3581 39.1223 19.5268 39.1654 12.6918C39.1654 11.6334 38.8646 11.1927 37.7597 11.1562C35.3248 11.0719 34.9706 10.7014 34.8497 8.24491C34.7991 7.26233 34.4757 6.84123 33.4242 6.84123C26.489 6.87117 19.5538 6.87117 12.6186 6.84123C11.5868 6.84123 11.2128 7.23426 11.1763 8.24491C11.0498 10.7294 10.6899 11.1084 8.2888 11.1898C7.20073 11.2291 6.85491 11.6222 6.86335 12.703C6.91395 19.5811 6.92707 26.4582 6.9027 33.3344C6.9027 34.3422 7.20916 34.7381 8.26069 34.7633C10.777 34.8111 11.1875 35.2743 11.3534 37.8514C11.3534 38.1518 11.3984 38.4747 11.4434 38.9323H11.4631ZM37.3295 40.336C37.3941 43.629 36.8571 43.3876 40.4081 43.4241C43.9591 43.4606 43.529 43.5392 43.529 40.364C43.529 37.1889 43.9282 37.2759 40.4166 37.2759C36.9049 37.2759 37.3435 37.1075 37.3295 40.3304V40.336ZM5.62344 2.62736C2.46606 2.70877 2.46605 1.96763 2.46605 5.49649C2.48855 9.16854 2.29174 8.64917 5.63188 8.66883C8.9186 8.68567 8.67399 9.09836 8.66837 5.70144C8.67118 2.04343 8.93266 2.69474 5.62344 2.62736ZM40.3772 2.62736C37.0933 2.69755 37.3013 2.04905 37.3042 5.51334C37.3042 9.16292 36.9696 8.67163 40.5403 8.67725C43.5177 8.67725 43.5318 9.14327 43.5234 5.76881C43.5149 1.98167 43.6246 2.70316 40.3772 2.62736ZM8.46031 37.4584C6.70027 37.4584 5.0302 37.4219 3.36856 37.4949C3.11552 37.4949 2.69098 37.9946 2.67692 38.2782C2.60663 39.6819 2.61788 41.0855 2.67692 42.4668C2.67692 42.7279 3.0621 43.1855 3.28141 43.1911C4.9824 43.2528 6.68621 43.2248 8.45469 43.2248L8.46031 37.4584Z"
            fill="url(#paint0_linear_964_167)"
          />
          <defs>
            <linearGradient
              id="paint0_linear_964_167"
              x1="20.5"
              y1="29"
              x2="-3.05474e-07"
              y2="46"
              gradientUnits="userSpaceOnUse"
            >
              <stop stopColor="#564AC8" />
              <stop offset="1" stopColor="#1DBDF5" />
            </linearGradient>
          </defs>
        </svg>
      ),
      heading: "User Experience Design",
      number: "01",
      detail:
        "Continue indulged speaking the was out horrible for domestic position. Seeing rather her you not esteem men settle genius excuse. Deal say over you age from. Comparison new.",
    },
    {
      src: "prj02.png",
      svg: (
        <svg
          width="46"
          height="46"
          viewBox="0 0 46 46"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M10.3372 28.9802C7.48216 27.7413 5.04625 26.6858 2.61033 25.6247C2.14058 25.4215 1.53582 25.3199 1.23484 24.9643C0.736969 24.3745 0.146268 23.6181 0.140642 22.9295C0.140642 22.3143 0.734159 21.4112 1.30798 21.129C3.6989 19.9465 6.18264 18.9531 8.62137 17.8863C9.07424 17.686 9.51867 17.463 10.3091 17.0905C9.58899 16.6897 9.18393 16.4216 8.75357 16.2438C6.43579 15.2335 4.1152 14.2288 1.78335 13.2495C0.756663 12.8149 0.0337493 12.2279 0.0478135 10.9721C0.0478135 9.75853 0.810096 9.27876 1.77209 8.85826C8.26413 6.05303 14.7496 3.23087 21.2285 0.391782C21.8033 0.129374 22.4282 -0.00428172 23.0597 0.000104568C23.6912 0.00449086 24.3141 0.146813 24.8852 0.41718C31.2723 3.22052 37.6687 6.0107 44.0745 8.7877C45.104 9.23643 46.0434 9.71901 45.9984 11.0708C45.9534 12.4226 45.0336 12.8798 43.9901 13.3144C41.7398 14.2486 39.5064 15.2194 37.273 16.1902C36.8258 16.385 36.4095 16.6474 35.6781 17.0369C36.4038 17.4291 36.8032 17.6916 37.2645 17.8835C39.6686 18.9334 42.0773 19.9682 44.4907 20.9879C45.3712 21.3661 46.0125 21.9079 45.9956 22.9634C45.9788 24.0189 45.4331 24.7019 44.4683 25.1082C42.2705 26.049 40.0765 26.9897 37.8862 27.9304C37.2617 28.2126 36.6485 28.4948 35.7091 28.9464C36.4854 29.3782 36.9355 29.6745 37.4165 29.889C39.7286 30.9125 42.0464 31.9238 44.3698 32.9228C45.3037 33.3207 45.9816 33.8795 45.9956 34.983C46.0097 36.0864 45.3796 36.7045 44.4486 37.1137C37.8862 39.9895 31.3491 42.9217 24.739 45.6846C23.6112 46.1051 22.3704 46.1051 21.2426 45.6846C14.6268 42.9443 8.07848 40.0403 1.50486 37.1871C0.562562 36.7807 0 36.1852 0 35.0592C0 33.871 0.618835 33.2756 1.60896 32.8551C3.93799 31.8701 6.25576 30.8542 8.57354 29.841C9.05173 29.6632 9.49054 29.412 10.3372 28.9802ZM42.308 11.1047C41.6892 10.7435 41.3629 10.5064 41.0028 10.3484C35.3406 7.87332 29.6868 5.38136 23.9964 2.97406C23.3092 2.74283 22.5619 2.76889 21.8924 3.04743C16.3342 5.40958 10.8098 7.8451 5.2769 10.2665C4.8606 10.4471 4.47243 10.6927 3.90704 10.9975C4.21359 11.2027 4.53096 11.3911 4.85779 11.5619C10.596 14.1018 16.3286 16.6418 22.0977 19.097C22.7883 19.3247 23.5378 19.2936 24.2073 19.0096C28.9076 17.034 33.5741 14.9598 38.249 12.9137C39.5176 12.369 40.775 11.7933 42.308 11.1075V11.1047ZM3.80015 22.9832C4.30365 23.2908 4.44991 23.4065 4.61587 23.477C10.4525 26.0339 16.2807 28.6049 22.1455 31.0969C22.795 31.3101 23.4995 31.28 24.1286 31.0122C29.7824 28.6218 35.4081 26.1637 41.0366 23.7169C41.4182 23.5248 41.7892 23.3119 42.1477 23.0791C41.9589 22.9129 41.7566 22.7628 41.5429 22.6304C38.6316 21.3378 35.7287 20.0227 32.7921 18.7951C32.2642 18.6393 31.6988 18.6712 31.1916 18.8854C29.5771 19.5147 27.9344 20.1243 26.4295 20.9681C24.1314 22.2579 21.9964 22.2522 19.6787 20.9964C17.8756 20.0255 15.887 18.7838 13.9855 18.7923C12.084 18.8007 10.1853 20.2033 8.29507 21.0048C6.88584 21.6059 5.49349 22.2381 3.80015 22.986V22.9832ZM42.0014 35.3442L42.0436 34.9265C41.6948 34.7318 41.3601 34.506 40.9972 34.3621C38.4234 33.2332 35.8666 32.0677 33.2478 31.0517C32.4899 30.7878 31.6655 30.7878 30.9075 31.0517C28.8542 31.8306 26.9217 32.9538 24.8402 33.6255C23.6532 33.9839 22.3874 33.9839 21.2004 33.6255C19.0739 32.9426 17.0852 31.8334 14.9953 31.015C14.362 30.7769 13.666 30.7669 13.0263 30.9868C10.3372 32.0762 7.69594 33.2812 5.04343 34.4609C4.70772 34.6482 4.38704 34.8615 4.08425 35.0987C4.46399 35.3245 4.64682 35.4627 4.85216 35.5531C10.6888 38.093 16.5226 40.6329 22.379 43.1334C22.8951 43.2929 23.4512 43.2608 23.9457 43.0431C27.1861 41.7025 30.4153 40.2999 33.6304 38.9199L42.0014 35.3442Z"
            fill="url(#paint0_linear_964_169)"
          />
          <defs>
            <linearGradient
              id="paint0_linear_964_169"
              x1="20.5"
              y1="29"
              x2="-3.05474e-07"
              y2="46"
              gradientUnits="userSpaceOnUse"
            >
              <stop stopColor="#564AC8" />
              <stop offset="1" stopColor="#1DBDF5" />
            </linearGradient>
          </defs>
        </svg>
      ),
      heading: "User Experience Design",
      number: "02",
      detail:
        "Continue indulged speaking the was out horrible for domestic position. Seeing rather her you not esteem men settle genius excuse. Deal say over you age from. Comparison new.",
    },
    {
      src: "prj03.png",
      svg: (
        <svg
          width="44"
          height="45"
          viewBox="0 0 44 45"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M0.192217 23.5424C-0.959474 16.0911 3.09503 7.18842 11.526 2.63439C20.2538 -2.08338 31.1436 -0.315607 37.8095 6.7444C44.7113 14.0569 46.0073 24.98 40.8622 33.3859C35.9862 41.3534 27.4804 44.8584 20.4953 43.9093C20.6979 41.6004 20.7728 41.6032 22.9596 41.4533C30.8161 40.8983 36.5579 37.0131 39.7521 29.9003C42.999 22.6849 42.0028 15.747 36.9242 9.64166C31.8457 3.53631 25.238 1.22738 17.5397 3.05066C9.9247 4.85174 5.1209 9.85536 3.04785 17.4038C2.7602 18.5713 2.58457 19.7635 2.52335 20.9643C2.35961 23.0762 2.39847 23.079 0.192217 23.5424Z"
            fill="url(#paint0_linear_964_177)"
          />
          <path
            d="M12.3812 37.4787C10.5885 39.2881 9.00941 40.8922 7.41924 42.474C5.58208 44.3167 4.32494 44.3195 2.47113 42.499L2.07706 42.1077C-0.553793 39.4824 -0.562118 38.525 2.05208 35.9357C3.45354 34.5482 4.86887 33.1606 6.49234 31.5732C4.82724 30.7573 3.49516 30.0746 2.13811 29.428C1.36384 29.0589 0.603452 28.7092 0.675606 27.6574C0.74776 26.6057 1.53035 26.3587 2.37122 26.1283C8.4627 24.4632 14.5514 22.7565 20.6456 21.0831C22.7825 20.4975 23.4652 21.1691 22.8852 23.2866C21.2201 29.4308 19.5328 35.5777 17.7706 41.6997C17.593 42.3214 16.8714 43.1567 16.3414 43.2067C15.8113 43.2566 14.9954 42.5656 14.6458 41.9911C13.8326 40.6424 13.2082 39.1605 12.3812 37.4787ZM20.1322 23.8804L5.97893 27.8933L5.92343 28.2819L10.9492 30.8405L2.8097 39.0633L5.06868 41.2224L13.1166 32.9413C14.0324 34.8035 14.8317 36.4242 15.6143 38.0476L16.0611 38.0005C17.3904 33.4353 18.6947 28.8702 20.1322 23.8777V23.8804Z"
            fill="url(#paint1_linear_964_177)"
          />
          <path
            d="M7.68871 21.3047C6.57864 15.9764 13.2196 8.49455 19.7246 7.67865C29.865 6.40763 35.8926 14.0615 36.4199 20.6803C37.2108 30.5598 28.8715 36.643 22.7301 36.4626C22.7717 34.2785 22.8966 34.0926 24.9502 33.6014C29.3405 32.5524 34.2137 28.0511 33.914 21.4601C33.6808 16.326 30.0065 11.5916 24.8697 10.3594C23.3205 9.96808 21.7081 9.89417 20.1296 10.1421C18.5511 10.3901 17.039 10.9548 15.6844 11.8023C14.3298 12.6498 13.1606 13.7626 12.2472 15.0737C11.3339 16.3848 10.6951 17.8671 10.3695 19.4314C10.0226 21.1187 8.90145 21.1298 7.68871 21.3047Z"
            fill="url(#paint2_linear_964_177)"
          />
          <path
            d="M24.9053 28.1594C25.3632 26.4416 25.835 24.8126 26.2263 23.1642C27.0588 19.6758 24.2614 16.9145 20.7509 17.7443C19.2023 18.1106 17.6677 18.5324 16.0137 18.9598C16.8629 16.3955 19.6686 14.8609 22.7018 15.1301C25.8766 15.4076 28.3493 17.8553 28.9043 21.2632C29.34 23.9412 27.575 27.0549 24.9053 28.1594Z"
            fill="url(#paint3_linear_964_177)"
          />
          <defs>
            <linearGradient
              id="paint0_linear_964_177"
              x1="29"
              y1="14.5"
              x2="-0.544199"
              y2="46.9598"
              gradientUnits="userSpaceOnUse"
            >
              <stop offset="0.0309257" stopColor="#564AC8" />
              <stop offset="1" stopColor="#1DBDF5" />
            </linearGradient>
            <linearGradient
              id="paint1_linear_964_177"
              x1="15.2469"
              y1="28.4431"
              x2="-0.159032"
              y2="45.3971"
              gradientUnits="userSpaceOnUse"
            >
              <stop offset="0.0309257" stopColor="#564AC8" />
              <stop offset="1" stopColor="#1DBDF5" />
            </linearGradient>
            <linearGradient
              id="paint2_linear_964_177"
              x1="26.618"
              y1="17.0588"
              x2="7.22247"
              y2="38.382"
              gradientUnits="userSpaceOnUse"
            >
              <stop offset="0.0309257" stopColor="#564AC8" />
              <stop offset="1" stopColor="#1DBDF5" />
            </linearGradient>
            <linearGradient
              id="paint3_linear_964_177"
              x1="24.5533"
              y1="19.3975"
              x2="15.7911"
              y2="28.9615"
              gradientUnits="userSpaceOnUse"
            >
              <stop offset="0.0309257" stopColor="#564AC8" />
              <stop offset="1" stopColor="#1DBDF5" />
            </linearGradient>
          </defs>
        </svg>
      ),
      heading: "User Experience Design",
      number: "03",
      detail:
        "Continue indulged speaking the was out horrible for domestic position. Seeing rather her you not esteem men settle genius excuse. Deal say over you age from. Comparison new.",
    },
  ];

  const scaleAnimation = {
    initial: { scale: 0, x: "-50%", y: "-50%" },
    enter: {
      scale: 1,
      x: "-50%",
      y: "-50%",
      transition: { duration: 0.4, ease: [0.76, 0, 0.24, 1] },
    },
    closed: {
      scale: 0,
      x: "-50%",
      y: "-50%",
      transition: { duration: 0.4, ease: [0.32, 0, 0.67, 0] },
    },
  };

  useEffect(() => {
    //Move Container
    xMoveContainer.current = gsap.quickTo(modalContainer.current, "left", {
      duration: 0.8,
      ease: "power3",
    });
    yMoveContainer.current = gsap.quickTo(modalContainer.current, "top", {
      duration: 0.8,
      ease: "power3",
    });
    //Move cursor
    xMoveCursor.current = gsap.quickTo(cursor.current, "left", {
      duration: 0.5,
      ease: "power3",
    });
    yMoveCursor.current = gsap.quickTo(cursor.current, "top", {
      duration: 0.5,
      ease: "power3",
    });
    //Move cursor label
    xMoveCursorLabel.current = gsap.quickTo(cursorLabel.current, "left", {
      duration: 0.45,
      ease: "power3",
    });
    yMoveCursorLabel.current = gsap.quickTo(cursorLabel.current, "top", {
      duration: 0.45,
      ease: "power3",
    });
  }, []);

  const moveItems = (x, y) => {
    xMoveContainer.current(x);
    yMoveContainer.current(y);
    xMoveCursor.current(x);
    yMoveCursor.current(y);
    xMoveCursorLabel.current(x);
    yMoveCursorLabel.current(y);
  };
  const manageModal = (active, index, x, y) => {
    moveItems(x, y);
    setModal({ active, index });
  };

  return (
    <div className={styles.headingfixed} id="Timeline">
      <div className={styles.upper__text__wraper}>
        <div className={styles.upper__text__wraper__text}>
          <div className={styles.upper__text__wraper__heading}>
            SERVICES WE OFFER
          </div>
          <div className={styles.upper__text__wraper__sub__heading}>
            Turn Information Into Actionable Insights
          </div>
        </div>
      </div>
      <main
        onMouseMove={(e) => {
          moveItems(e.clientX, e.clientY);
        }}
        className={styles.projects}
      >
        <div className={styles.body}>
          {projects.map((project, index) => {
            return (
              <Project
                index={index}
                svg={project.svg}
                heading={project.heading}
                number={project.number}
                detail={project.detail}
                manageModal={manageModal}
                key={index}
              />
            );
          })}
        </div>
        <>
          <motion.div
            ref={modalContainer}
            variants={scaleAnimation}
            initial="initial"
            animate={active ? "enter" : "closed"}
            className={styles.modalContainer}
          >
            <div
              style={{ top: index * -100 + "%" }}
              className={styles.modalSlider}
            >
              {projects.map((project, index) => {
                const { src, color } = project;
                return (
                  <div
                    className={styles.modal}
                    style={{
                      backgroundColor: "#232323",
                      objectFit: "cover",
                    }}
                    key={`modal_${index}`}
                  >
                    <img
                      src={`/images/${src}`}
                      height={300}
                      style={{ objectFit: "cover" }}
                      alt="devscot"
                    />
                  </div>
                );
              })}
            </div>
          </motion.div>
        </>
      </main>
    </div>
  );
}
